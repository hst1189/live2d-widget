<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Live2D 看板娘 v1.0 Demo</title>
    <link rel="icon" href="avatar.png">

    <style>
    /* 全要素でスクロール禁止 */
    html, body {overflow: hidden;}

    /* スクロールさせたい要素のスタイル（overflow: auto;） */
    .can-scroll {
        width: max-content;
        height: 600px;
        position: absolute;
        top: 30;
        left: 0;
        overflow: auto;
    }
    </style>    
</head>
<body style="font-family: 'Microsoft YaHei';">
    <div style="position:fixed; top:0px; left:600px; background-color: white;">
        <ul>
            <li><a href="" style="color: #38A3DB; text-decoration: none;">Demo 1 - 常规引用</a></li>
            <li><a href="" style="color: #38A3DB; text-decoration: none;">Demo 2 - 自动加载 autoload.js</a></li>
            <li><a href="" style="color: #38A3DB; text-decoration: none;">Demo 3 - 内置 waifu-tips.json</a></li>
            <li><a target="_blank" href="https://github.com/imuncle/live2d">＜致敬 Model收集者❤＞</a><li>
        </ul>
        <text>　角色番号：</text><text id="model_id"></text><text>　服饰番号：</text><text id="texure_id"></text>
        <button id="Change" class="active">角色变更</button><button id="texure" class="active">服饰变更</button>
    </div>

    <h3>Live2D 角色配置一览 json </h3>
    <div class="can-scroll">
    	<ul id="models-list" style="margin-top:0px ;"><!-- 列表内容将在这里动态生成 --></ul>
    </div>


    <!-- 动态加载 canvas live2d   添加以下2个jQuery，1个aotuload.js-->

    <!-- waifu-tips.js 依赖 jQuery v3.3.1  -->
    <script src=https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.min.js></script>
    <script src=https://cdn.jsdelivr.net/npm/jquery-ui@1.14.1/dist/jquery-ui.min.js></script>
    
    <!-- 使用 autoload.js 启动Live2D看板娘  -->
    <!-- <script src=autoload></script>  --> 


  <script>
    // 使用 JavaScript 获取 models 数据并显示为列表
    async function fetchModels() {
      try {
        const response = await fetch('/models'); // 从 API 获取数据
        if (!response.ok) {
          throw new Error(`HTTP error! status: ${response.status}`);
        }
        const data = await response.json();

        const modelsList = document.getElementById('models-list');
        modelsList.innerHTML = ''; // 清空现有列表

        data.forEach(model => {
          const listItem = document.createElement('li');
          listItem.textContent = `ID: ${model.id}, Names: ${model.name.join(', ')}`; // 显示 ID 和所有名称
          modelsList.appendChild(listItem);
        });

      } catch (error) {
        console.error('Failed to fetch models:', error);
        const modelsList = document.getElementById('models-list');
        modelsList.textContent = 'Failed to load models.'; // 显示错误信息
      }
    }

    // 在页面加载完成后调用 fetchModels 函数
    window.onload = fetchModels;
  </script>

</body>
</html>
